#!/boot/rc

#set up ramfs as a rootlike fs

hostdir=`{cat '#c/hostowner'}
if (! ~ $hostdir ?*){
	echo please set hostowner
	exit ''
}

cd /
echo -n 'ramfs -S ramboot...'
ramfs -S ramboot
mount -c /srv/ramboot /root
bind -ac /root /
echo -n 'tar xf /boot/skel.tar...'
tar xf /boot/skel.tar
if (test -d /root/mnt)
	bind -ac /root/mnt /mnt
mount -b /srv/factotum /mnt
bind -ac /root/bin /bin
if(~ $tgzfs *.tgz){
	dossrv
	mount /srv/dos /x /dev/sdC0/9fat
	echo tar xzf $tgzfs ...
	tar xzf /x/$tgzfs
}
bind -c /usr/bootes/tmp /tmp
echo 'partial root built on ramfs'
exit ''
